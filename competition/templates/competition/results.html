{% extends 'base.html' %}

{% block title %}{{ event }} &ndash; Výsledky{% endblock %}

{% block meta %}
<meta http-equiv="refresh" content="30" />
{% endblock %}


{% block content %}
{% if request.user.is_staff %}
<form action="{% url 'competition:results' event.pk %}" method="POST" >
  {% csrf_token %}
  <input type="hidden" id="freeze" name="freeze" value="True">
  <button type="submit" >
    <span aria-hidden="true">
      {% if event.frozen_results %}
        Updatni aktuálne výsledky
      {% else %}
        Zmraz aktuálne výsledky
      {% endif %}
    </span>
  </button>
</form>
{% endif %}
<table class="table">
  <thead>
    <tr>
      <th scope="col">Poradie</th>
      <th scope="col">Názov tímu</th>
      <th scope="col">Škola</th>
      <th scope="col">Účastníci</th>
      <th scope="col">Bonifikácia</th>
      {% for category in categories %}
      <th scope="col">{{ category.name }}</th>
      {% endfor %}
      <th scope="col">Úlohy</th>
      <th scope="col">Spolu</th>
    </tr>
  </thead>
  <tbody>
    {% for team in teams %}
    <tr>
      <th scope="row">{{ team.rank }}</th>
      <td>{{ team.name }}</td>
      <td>{{ team.school }}</td>
      <td>{{ team.members }}</td>
      <td>{{ team.compensation|floatformat:1 }}</td>
      {% for count in team.solved_by_category %}
      <td>{{ count }}</td>
      {% endfor %}
      <td>{{ team.problem_points|floatformat:1 }}</td>
      <td>{{ team.total_points|floatformat:1 }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}